Урок 2. Механизмы контрольных групп


Задание 1:

1) запустить контейнер с ubuntu, используя механизм LXC

apt update
apt install lxc-templates                (установка с заготовками-тэмплейтов).
apr install lxd-installer
lxd init                                 (инициализация)
lxc storage list                         (проверяем что нам создало)
lxc network list                         (проверим какие сети есть )
lxc-create -n test1000 -t ubuntu         (cоздадим  контейнер на  основе образа Ubuntu)
lxc-start -d -n test000                  (проверим работает ли контейнер)
lxc-attach -n test111                    (запускаем нашу оболочку test111)
bash -v                                  (наша оболочка запуститься в ф.с с распакованным образом ubuntu)

2) ограничить контейнер 256 Мб ОЗУ и проверить, что ограничение работает

nano /var/lib/lxc/test111/config         (сохранение конфигурации для test111)

в nano файле дописать и сохранить:

# cgroup2

lxc.cgroup2.memory.max = 256M

# Autostart

lxc.start.auto  =  1

sudo lxc-attach -n test111               (запусить оболочку test111)
free -m                                  (убедитьться что память ограничена до 256 M)

3) добавить автозапуск контейнеру, перезагрузить ОС и убедиться, что контейнер действительно запустился самостоятельно

sudo lxc-stop  -n test111                (остановить контейнер)
sudo lxc-start -n test111                (самостоятелньый запуск контейнера)
sudo lxc-ls -f                           (проверяем запуск контейнера самостоятельно)

4) при создании указать файл, куда записывать логи

sudo lxc-start -n test111 logfile log.txt       (в этот файл будет писаться наш log)
cat log.txt                                     (этой командой можно проверить)

5) после перезагрузки проанализировать логи

запустилось все без изменений

Задание 2*: настроить автоматическую маршрутизацию между контейнерами. Адреса можно взять: 10.0.12.0/24 и 10.0.13.0/24.
Задание со звездочкой - повышенной сложности, это нужно учесть при выполнении (но сделать его необходимо).
